name: Bookshop init - Creating a new SvelteKit Bookshop

steps:
  - ref: ./background.toolproof.yml
  - step: I run "npm start -- --new test --framework svelte --format json"
  - step: stderr should be empty
  - step: stdout should contain "Creating a Bookshop project at test"
  - step: The file "test/bookshop/bookshop.config.cjs" should contain {val}
    val: |-
      @bookshop/svelte-engine
  - step: The file "test/components/sample/sample.svelte" should contain {val}
    val: |-
      c-sample
  - step: The file "test/components/sample/sample.bookshop.json" should contain {val}
    val: |-
      content_blocks
  - step: The file "test/shared/svelte/page.svelte" should contain {val}
    val: |-
      each content_blocks as component
  - step: The file "test/components/sample/sample.scss" should not exist
  - step: The file "test/shared/styles/global.scss" should not exist